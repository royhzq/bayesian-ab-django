<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Normal Plot</title>
    <meta name="description" content="">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.13.0/d3.min.js"></script>
    <!-- <script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script> -->
    <style type="text/css">
    body {
        font: 10px sans-serif;
    }
    .axis path,
    .axis line {
        fill: none;
        stroke: #000;
        shape-rendering: crispEdges;
    }
    /*.x.axis path {
        display: none;
    }*/
    .line {
        fill: none;
        stroke: steelblue;
        stroke-width: 1.5px;
    }
    </style>
</head>

<body>

</body>

<script>
//setting up empty data array
var data =betaData(6,14);
// line chart based on http://bl.ocks.org/mbostock/3883245
var margin = {
        top: 20,
        right: 20,
        bottom: 30,
        left: 50
    },
    width = 960 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;

var x = d3.scaleLinear()
    .range([0, width]);

var y = d3.scaleLinear()
    .range([height, 0]);

var xAxis = d3.axisBottom(x);
var yAxis = d3.axisLeft(y);
var line = d3.line()
    .x(function(d) {
        return x(d.q);
    })
    .y(function(d) {
        return y(d.p);
    });

var svg = d3.select("body").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

x.domain(d3.extent(data, function(d) {
    return d.q;
}));
y.domain(d3.extent(data, function(d) {
    return d.p;
}));

svg.append("g")
    .attr("class", "x axis")
    .attr("transform", "translate(0," + height + ")")
    .call(xAxis);

svg.append("g")
    .attr("class", "y axis")
    .call(yAxis);

svg.append("path")
    .datum(data)
    .attr("class", "line")
    .attr("d", line);


function factorial(num) {
  if(num===0){
    return 1;
  }
  else{
    return num*factorial(num-1);
  }
}
function betaPDF(x, a, b) {
    numerator = Math.pow(x, a-1)*Math.pow(1-x, b-1)
    beta = (factorial(a-1)*factorial(b-1))/factorial(a+b-1)
    console.log("fact1: ", factorial(a-1)*factorial(b-1))
    console.log("fact2: ", factorial(a+b-1))
    
    console.log("numerator: ", numerator,"beta: ", beta)
    console.log(('pdf: ',Math.pow(x, a-1)*Math.pow(1-x, b-1))/beta)
    return (Math.pow(x, a-1)*Math.pow(1-x, b-1))/beta
}

function betaData(a, b) {
    data = [];
    for (var i = 0; i < 1000; i++) {
        p = betaPDF(i/1000, a, b);
        el = {
            "q": i/1000,
            "p": p
        };
        data.push(el);
    };
    return data
}

</script>

</html>